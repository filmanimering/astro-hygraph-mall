---
// src/components/MyButton.astro
import LinkExternal from "./ikonerSvg/LinkExternal.astro";

interface Props {
  titel: string;
  link: string;
  variant?: "primary" | "secondary" | "outline-dark" | "outline-light";
  fullWidth?: boolean;
}

const { titel, link, variant = "primary", fullWidth = false } = Astro.props;

const isExternal = /^https?:\/\//.test(link);

console.log("Button style: ", variant);

const baseClasses =
  "py-2 px-4 rounded-xl text-sm tracking-wide items-center gap-2 transition-all duration-300 hover:scale-[1.03] inline-flex font-medium border-2 transition-colors";

// Vi definierar objekten med Record för att TypeScript ska veta exakt vilka nycklar som finns
const variants: Record<string, string> = {
  primary: "bg-slate-900 text-white border-slate-900 hover:bg-slate-800",

  secondary:
    "bg-white text-slate-900 border-slate-300 hover:bg-slate-50 shadow-sm",

  outlineDark:
    "bg-transparent text-slate-900 border-slate-900/40 hover:border-slate-900 hover:bg-slate-900/5",

  outlineLight:
    "bg-white/10 backdrop-blur-sm text-white border-white/60 hover:bg-white/20",
};

// Här hämtar vi rätt klasser, och faller tillbaka på primary om något går fel
const themeClasses = variants[variant] || variants.primary;
---

<a
  href={link}
  target={isExternal ? "_blank" : undefined}
  rel={isExternal ? "noopener noreferrer" : undefined}
  class:list={[
    baseClasses,
    themeClasses,
    { "w-full justify-center": fullWidth },
  ]}
>
  {titel}
  {isExternal && <LinkExternal />}
</a>
