---
// src/components/BaseHead.astro
import "../styles/global.css";
import { SITE_TITLE } from "../consts";
import SEO from "./SEO.astro";

interface Props {
	pageSeo?: any; // Objektet från den specifika sidan
	globalSeo?: any; // Objektet från Global Settings
	fallbackTitle?: string;
}

const { pageSeo, globalSeo, fallbackTitle } = Astro.props;

// Här gör vi logiken för prioritering EN gång, så slipper du göra det på varje sida
const finalTitle =
	pageSeo?.seoTitle || globalSeo?.seoTitle || fallbackTitle || SITE_TITLE;
const finalDescription =
	pageSeo?.seoDescription || globalSeo?.seoDescription || "";
const finalImage = pageSeo?.ogImage?.url || globalSeo?.ogImage?.url;
---

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" type="image/svg+xml" href="/favicon.png" />
<link rel="sitemap" href="/sitemap-index.xml" />
<link
	rel="alternate"
	type="application/rss+xml"
	title={SITE_TITLE}
	href={new URL("rss.xml", Astro.site)}
/>
<meta name="generator" content={Astro.generator} />

<link
	rel="preload"
	href="/fonts/atkinson-regular.woff"
	as="font"
	type="font/woff"
	crossorigin
/>
<link
	rel="preload"
	href="/fonts/atkinson-bold.woff"
	as="font"
	type="font/woff"
	crossorigin
/>

<SEO title={finalTitle} description={finalDescription} image={finalImage} />
