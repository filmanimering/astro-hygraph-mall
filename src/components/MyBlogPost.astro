---
import FormattedDate from "./FormattedDate.astro";
import MyButton from "./MyButton.astro";
import MyImage from "./MyImage.astro";

const { title, excerpt, slug, poster, date, bloggKategori } = Astro.props;
---

<article class="flex flex-col h-full">
  <div
    class="rounded-2xl h-full flex flex-col overflow-hidden transition-all duration-300 shadow-gray-300 shadow-lg"
  >
    {/* Länk på bilden */}
    <a href={`/blog/${slug}`} class="block overflow-hidden group">
      <MyImage
        src={poster?.url || "/default-og-image.jpg"}
        alt={title || "Poster bild"}
        aspect="video"
        class="w-full h-auto transition-transform duration-500 group-hover:scale-105"
      />
    </a>

    {/* Text-innehåll */}
    <div class="flex flex-col px-4 pt-4 pb-6 grow">
      <div class="flex items-center justify-between">
        <div class="text-xs font-bold uppercase tracking-widest text-slate-700">
          <FormattedDate date={new Date(date)} />
        </div>

        {/* SEPARAT LÄNK FÖR KATEGORI */}
        {
          bloggKategori && (
            <a
              href={`/blogCategory/${bloggKategori.slug}`}
              class="text-xs text-blue-950 font-medium uppercase tracking-widest  
              bg-[#DDE1FF] px-3 py-1 rounded-xl transition delay-100 duration-150 ease-in-out hover:-translate-y-0.5 hover:scale-103"
            >
              {bloggKategori.displayName}
            </a>
          )
        }
      </div>

      {/* Länk på rubriken */}
      <h2 class="mt-4 text-xl leading-tight text-slate-900 font-medium">
        <a
          href={`/blog/${slug}`}
          aria-label={bloggKategori.displayName}
          class="hover:text-slate-600 transition-colors"
        >
          {title}
        </a>
      </h2>

      {
        excerpt && (
          <p class="mt-2 text-sm leading-relaxed text-slate-600 line-clamp-3">
            {excerpt}
          </p>
        )
      }

      {/* LÄS MER KNAPP */}
      <div class="mt-auto pt-2">
        <MyButton titel="Läs mer" link={`/blog/${slug}`} variant="secondary" />
      </div>
    </div>
  </div>
</article>
