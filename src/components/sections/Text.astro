---
// Text.astro
import Prose from "../Prose.astro";
import MyImage from "../MyImage.astro";

const { data } = Astro.props;
const { content, textLayout, image } = data;
const htmlContent = content?.html;

---

<section class="pt-2 pb-12 overflow-hidden">
  <div class="max-w-7xl mx-auto px-6 sm:px-8 p-4 sm:p-8 rounded-2xl">
    {/* FALL 1: Text till vänster, Bild till höger */}
    {
      textLayout === "textLeftImageRight" && (
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-4 md:gap-12 items-center ">
          <div>
            <Prose>
              <div set:html={htmlContent} />
            </Prose>
          </div>
          <div>
            <MyImage
              src={image?.url}
              alt={image?.alt || "Poster bild"}
              width={800}
              height={600}
              class="rounded-3xl shadow-2xl"
            />
          </div>
        </div>
      )
    }

    {/* FALL 2: Text till höger, Bild till vänster */}
    {
      textLayout === "textRightImageLeft" && (
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
          {/* På mobil hamnar texten först (standard ordning) */}
          <div class="lg:order-2">
            <Prose>
              <div set:html={htmlContent} />
            </Prose>
          </div>
          <div class="lg:order-1">
            <MyImage
              src={image?.url}
              alt=""
              width={800}
              height={600}
              class="rounded-3xl shadow-2xl"
            />
          </div>
        </div>
      )
    }

    {/* FALL 3: Default (Endast text) */}
    {
      (textLayout === "default" || !textLayout) && (
        <div class="max-w-7xl mx-auto">
          <Prose>
            <div set:html={htmlContent} />
          </Prose>
        </div>
        <div>
          {data.imageCards?.map((card: any) => (
            <div class="group flex flex-col bg-white rounded-3xl  shadow-xl transition-all hover:shadow-2xl">
              {card.imageCardTitle && (<p class="text-2xl font-medium">{card.imageCardTitle}</p>)}
              {card.imageCardText && (<p class="mt-2 mb-4">{card.imageCardText}</p>)}
             
                
                {card.imageCardBild && (                  
                <MyImage
                  src={card.imageCardBild.url}
                  alt={card.imageCardBild?.alt || "Poster bild"}
                  aspect="auto"
                  width={card.imageCardBild.width || 800}
                  height={card.imageCardBild.height || 600}
                  class="w-full h-auto"
                />                
              )}

            </div>
            )
          )
          }
        </div>
      )
    }
  </div>
</section>
