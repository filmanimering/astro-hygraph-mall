---
// src/components/sections/SectionVideoGrid.astro
import VideoCard from "../VideoCard.astro";
const { data } = Astro.props;

const videos = data?.videos || [];
const videoStyle = data.videoStyle || "defaultLayout";

const gridCols =
  {
    1: "lg:grid-cols-1",
    2: "lg:grid-cols-2",
    3: "lg:grid-cols-3",
    4: "lg:grid-cols-4",
    5: "lg:grid-cols-5",
  }[data.numberOfColumns as 1 | 2 | 3 | 4 | 5] || "lg:grid-cols-3";
---

<section class="max-w-7xl mx-auto pt-8 pb-12 px-4 md:px-8">
  {/* FALL 1: Default grid */}
  {
    videoStyle === "defaultGrid" && (
      <div>
        <h1 class="text-3xl md:text-4xl font-medium">{data.titleVideoGrid}</h1>
        <p class="mt-4 mb-8 opacity-80">{data.textVideoGrid}</p>

        <div class:list={["grid grid-cols-1 gap-8", gridCols]}>
          {videos.map((v: any) => (
            <div class="flex flex-col">
              <VideoCard
                videoUrl={v.videoUploadedUrl?.url}
                poster={v.thumbnail?.url}
                videoStyle={videoStyle}
              />
              <div class="mt-4">
                <p class="text-lg font-medium ">{v.title}</p>
                <p class="text-sm  mt-1 line-clamp-2">{v.videoText}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    )
  }

  {/* FALL 2: Single Autoplay - Ingen text, bara ren video */}
  {
    videoStyle === "singleVideoAutoPlay" && videos.length > 0 && (
      <div class="max-w-5xl mx-auto">
        <div class="rounded-3xl overflow-hidden shadow-2xl border border-white/5">
          <VideoCard
            videoUrl={videos[0].videoUploadedUrl?.url}
            poster={videos[0].thumbnail?.url}
            videoStyle={videoStyle}
          />
        </div>
      </div>
    )
  }
</section>
